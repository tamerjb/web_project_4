!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasValidInputs(){return this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this.toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButton()})),this.resetValidation()}))}toggleButton(){this._hasValidInputs()?(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)):(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetValidation(){this.toggleButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s,o){t(this,"_getCloneFromTemplate",(()=>document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0))),t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__like-button_active")})),t(this,"_setEventListeners",(()=>{this._likeButton.addEventListener("click",(e=>{this._handleLikeButton(e)})),this._image.addEventListener("click",(e=>{this._handleCardClick(e)})),this._deleteButton.addEventListener("click",(e=>{this._element.remove()}))})),t(this,"generateCard",(()=>(this._element=this._getCloneFromTemplate(),this._image=this._element.querySelector(".card__image"),this._image.src=this._link,this._image.alt="Place in ".concat(this._placename),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__image-trash"),this._element.querySelector(".card__info-title").textContent=this._placename,this._setEventListeners(),this._element))),this._placename=e.placename,this._link=e.link,this._selector=s,this._handleCardClick=o}}class o{constructor(e){this._popupElement=document.querySelector(e),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._overlayClose=this._overlayClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._overlayClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._overlayClose)}_overlayClose(e){e.target.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}class n extends o{constructor(e,t){var s,o;super(e),o=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[s]=o,this._submitHandler=t,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValues(){const e=[...this._formElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()})),super.setEventListeners()}}document.querySelector(".form");const r=document.querySelector(".profile"),i=(r.querySelector(".profile__name"),document.querySelector(".popup")),l=(r.querySelector(".profile__title"),form.querySelector(".form__input[name='name']")),a=form.querySelector(".form__input[name='title']"),c=document.querySelector(".cards"),u=(document.querySelector("#card-template"),c.querySelector(".cards__list"),document.querySelector(".popup-edit-profile"),document.querySelector(".popup__form-type-add-place")),p=(u.querySelector(".form__input-type-place-name"),u.querySelector(".form__input-type-place-url"),document.querySelector(".popup-prev")),_=(p.querySelector(".popup__image"),p.querySelector(".popup__caption"),document.querySelector(".popup-place")),d=r.querySelector(".profile__edit-button"),h=r.querySelector(".profile__add-button");document.querySelectorAll(".popup__close-button"),d.addEventListener("click",(()=>{const e=v.getUserInfo();l.value=e.name,a.value=e.job,y.enableValidation(),y.toggleButton(),b.open()})),h.addEventListener("click",(()=>{S.open(),f.resetValidation()}));const m={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input-error",errorClass:"form__input-error"},y=new e(m,i),f=new e(m,_);y.enableValidation(),f.enableValidation();const v=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__title"}),E=new class extends o{constructor(e){super(e)}open(e,t){this._popupImage=this._popupElement.querySelector(".popup__image"),this._popupImage.src=e,this._popupImage.alt="A view of ".concat(t),this._popupElement.querySelector(".popup__caption").textContent=t,super.open()}}(".popup-prev");E.setEventListeners();const b=new n(".popup",(e=>{v.setUserInfo(e.name,e.title)}));b.setEventListeners();const S=new n(".popup-place",(e=>{L(e),f.resetValidation()}));S.setEventListeners();const g=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{placename:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{placename:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{placename:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{placename:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{placename:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{placename:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>L(e)},".cards__list");function L(e){const t=function(e){return new s(e,"#card-template",(()=>{E.open(e.link,e.placename)})).generateCard()}(e);g.addItem(t)}g.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlncywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlncy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlncy5lcnJvckNsYXNzO1xuXG4gICAgfVxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgICAgICAvLyBhZGQgZXJyb3IgbXNnL2NsYXNzXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICAvLyBpbnB1dC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgfVxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgICAgICAvLyBhZGQgZXJyb3IgbXNnL2NsYXNzXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIC8vIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cbiAgICB9XG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgICAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuICAgIF9oYXNWYWxpZElucHV0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcblxuICAgIH1cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcblxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlQnV0dG9uKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dHMoKSkge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgfVxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uKCk7IC8vIDw9ID0gY29udHJvbGxpbmcgdGhlIHN1Ym1pdCBidXR0b24gPT1cblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KSAvLzw9ID0gY2xlYXJpbmcgZXJyb3JzID09XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG59IiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fcGxhY2VuYW1lID0gZGF0YS5wbGFjZW5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcblxuICAgIH1cbiAgICBfZ2V0Q2xvbmVGcm9tVGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuICAgIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4ge1xuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcblxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgICAgfSlcbiAgICB9XG4gICAgZ2VuZXJhdGVDYXJkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0Q2xvbmVGcm9tVGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBQbGFjZSBpbiAke3RoaXMuX3BsYWNlbmFtZX1gO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2UtdHJhc2hcIik7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbmZvLXRpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fcGxhY2VuYW1lO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheUNsb3NlID0gdGhpcy5fb3ZlcmxheUNsb3NlLmJpbmQodGhpcylcbiAgICB9XG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb3ZlcmxheUNsb3NlKTtcblxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX292ZXJsYXlDbG9zZSk7XG5cbiAgICB9XG4gICAgX292ZXJsYXlDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcbiAgICB9XG5cbn0iLCJpbXBvcnQge1xuICAgIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwXCI7XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvcihQb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgICAgIHN1cGVyKFBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgfVxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9XG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuXG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHN1cGVyLmNsb3NlKClcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTsgLy9yZXNldCB0aGUgZm9ybSB3aGVuIG9wZW5uaW5nIGFnYWluXG5cbiAgICB9XG59IiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gU2VsZWN0b3JzIC8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dFtuYW1lPSduYW1lJ11cIik7XG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dFtuYW1lPSd0aXRsZSddXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBjYXJkcy5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcGxhY2VQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXR5cGUtYWRkLXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IHBsYWNlTmFtZSA9IHBsYWNlUG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtdHlwZS1wbGFjZS1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHBsYWNlVVJMID0gcGxhY2VQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC10eXBlLXBsYWNlLXVybFwiKTtcbmV4cG9ydCBjb25zdCBpbWdQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1wcmV2XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJldmlld0ltZyA9IGltZ1ByZXZpZXcucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3Q2FwdGlvbiA9IGltZ1ByZXZpZXcucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcblxuXG5leHBvcnQgY29uc3QgcGxhY2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1wbGFjZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcblxuXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19jbG9zZS1idXR0b24nKTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFt7XG4gICAgICAgIHBsYWNlbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGxhY2VuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwbGFjZW5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwbGFjZW5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICAgIH0sXG5dOyIsIi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vIElNUE9SVFMgLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmltcG9ydCB7XG4gIEZvcm1WYWxpZGF0b3Jcbn1cbmZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuaW1wb3J0IHtcbiAgQ2FyZFxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQge1xuICBQb3B1cFxufVxuZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCB7XG4gIFBvcHVwV2l0aEZvcm1cbn1cbmZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7XG4gIFNlY3Rpb25cbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuXG5pbXBvcnQge1xuICBVc2VySW5mb1xufSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5cbmltcG9ydCBcIi4uL3N0eWxlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIFBvcHVwV2l0aEltYWdlXG59IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmltcG9ydCB7XG4gIHByb2ZpbGVGb3JtLFxuICBwcm9maWxlLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZVBvcHVwLFxuICBwcm9maWxlVGl0bGUsXG4gIGlucHV0TmFtZSxcbiAgaW5wdXRUaXRsZSxcbiAgY2FyZHMsXG4gIGNhcmRUZW1wbGF0ZSxcbiAgY2FyZExpc3QsXG4gIHByb2ZpbGVFZGl0LFxuICBwbGFjZVBvcHVwRm9ybSxcbiAgcGxhY2VOYW1lLFxuICBwbGFjZVVSTCxcbiAgaW1nUHJldmlldyxcbiAgcG9wdXBQcmV2aWV3SW1nLFxuICBwb3B1cFByZXZpZXdDYXB0aW9uLFxuICBwbGFjZUZvcm0sXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICBlZGl0UHJvZmlsZUJ1dHRvbixcbiAgYWRkQ2FyZFBvcHVwLFxuICBjbG9zZUJ1dHRvbnMsXG4gIGluaXRpYWxDYXJkc1xuXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIlxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gRXZlbnRMaXN0ZW5lcnMgLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gaW5mby5uYW1lO1xuICBpbnB1dFRpdGxlLnZhbHVlID0gaW5mby5qb2I7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbmFkZENhcmRQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZENhcmQub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuXG59KTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gRm9ybSBWYWxpZHRhdGlvbiAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgdmFsaWRhdGVDb25maWdzID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG59O1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0ZUNvbmZpZ3MsXG4gIHByb2ZpbGVQb3B1cFxuKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZUNvbmZpZ3MsIHBsYWNlRm9ybSk7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBQb3B1cCBjcmVhdGlvbiAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC1wcmV2XCIpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBcIiwgKGRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLnRpdGxlKTtcbn0pO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cC1wbGFjZVwiLCAoZGF0YSkgPT4ge1xuICByZW5kZXJDYXJkKGRhdGEpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gY2FyZCBjcmVhdGlvbiAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgcGxhY2VzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4gcmVuZGVyQ2FyZChkYXRhKSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxucGxhY2VzU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgY2FyZFRlbXBsYXRlU2VsZWN0b3IsICgpID0+IHtcbiAgICBwb3B1cEltYWdlLm9wZW4oZGF0YS5saW5rLCBkYXRhLnBsYWNlbmFtZSk7XG4gIH0pO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZW5lcmF0ZUNhcmQoZGF0YSk7XG4gIHBsYWNlc1NlY3Rpb24uYWRkSXRlbShlbGVtZW50KTtcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgICAgbmFtZVNlbGVjdG9yLFxuICAgICAgICBqb2JTZWxlY3RvclxuICAgIH0pIHtcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcblxuICAgIH1cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gICAgfVxufSIsImltcG9ydCB7XG4gICAgUG9wdXBcbn0gZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgfVxuICAgIG9wZW4oaW1hZ2UsIHRleHQpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBgQSB2aWV3IG9mICR7dGV4dH1gO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIHJlbmRlcmVyXG4gICAgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG5cbiAgICB9XG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkSXRlbShpdGVtKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICAgIH1cbn0iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzVmFsaWRJbnB1dHMiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbiIsInRvZ2dsZUJ1dHRvbiIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwicmVzZXRWYWxpZGF0aW9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwiX3NlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsInRhcmdldCIsInRvZ2dsZSIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2RlbGV0ZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2dldENsb25lRnJvbVRlbXBsYXRlIiwic3JjIiwiX2xpbmsiLCJhbHQiLCJfcGxhY2VuYW1lIiwicGxhY2VuYW1lIiwibGluayIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJjbG9zZSIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfb3ZlcmxheUNsb3NlIiwia2V5Iiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsIlBvcHVwU2VsZWN0b3IiLCJzdWJtaXRIYW5kbGVyIiwic3VwZXIiLCJfZm9ybUVsZW1lbnQiLCJyZXNldCIsIl9zdWJtaXRIYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJwcm9maWxlIiwicHJvZmlsZVBvcHVwIiwiaW5wdXROYW1lIiwiZm9ybSIsImlucHV0VGl0bGUiLCJjYXJkcyIsInBsYWNlUG9wdXBGb3JtIiwiaW1nUHJldmlldyIsInBsYWNlRm9ybSIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZFBvcHVwIiwiaW5mbyIsInVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJhZGRGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGVDb25maWdzIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsInNldFVzZXJJbmZvIiwicG9wdXBJbWFnZSIsImltYWdlIiwidGV4dCIsIl9wb3B1cEltYWdlIiwidGl0bGUiLCJyZW5kZXJDYXJkIiwicGxhY2VzU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiXSwic291cmNlUm9vdCI6IiJ9