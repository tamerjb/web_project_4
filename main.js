!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasValidInputs(){return this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this.toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButton()})),this.resetValidation()}))}toggleButton(){this._hasValidInputs()?(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)):(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetValidation(){this.toggleButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s,o){t(this,"_getCloneFromTemplate",(()=>document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0))),t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__like-button_active")})),t(this,"_setEventListeners",(()=>{this._likeButton.addEventListener("click",(e=>{this._handleLikeButton(e)})),this._image.addEventListener("click",(e=>{this._handleCardClick(e)})),this._deleteButton.addEventListener("click",(e=>{this._element.remove()}))})),t(this,"generateCard",(()=>(this._element=this._getCloneFromTemplate(),this._image=this._element.querySelector(".card__image"),this._image.src=this._link,this._image.alt="Place in ".concat(this._placename),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__image-trash"),this._element.querySelector(".card__info-title").textContent=this._placename,this._setEventListeners(),this._element))),this._placename=e.placename,this._link=e.link,this._selector=s,this._handleCardClick=o}}class o{constructor(e){this._popupElement=document.querySelector(e),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._overlayClose=this._overlayClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._overlayClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._overlayClose)}_overlayClose(e){e.target.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}class r extends o{constructor(e,t){var s,o;super(e),o=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[s]=o,this._submitHandler=t,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValues(){const e=[...this._formElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()})),super.setEventListeners()}}document.querySelector(".form");const n=document.querySelector(".profile"),i=(n.querySelector(".profile__name"),document.querySelector(".popup")),l=(n.querySelector(".profile__title"),form.querySelector(".form__input[name='name']")),a=form.querySelector(".form__input[name='title']"),c=document.querySelector(".cards"),u=(document.querySelector("#card-template"),c.querySelector(".cards__list")),p=(document.querySelector(".popup-edit-profile"),document.querySelector(".popup__form-type-add-place")),d=(p.querySelector(".form__input-type-place-name"),p.querySelector(".form__input-type-place-url"),document.querySelector(".popup-prev")),_=(d.querySelector(".popup__image"),d.querySelector(".popup__caption"),document.querySelector(".popup-place")),h=n.querySelector(".profile__edit-button"),m=n.querySelector(".profile__add-button"),y=(document.querySelectorAll(".popup__close-button"),(e,t)=>{fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.status))).catch((e=>console.log(e)))}),f=new class{constructor(e,t){this.baseUrl=e,this.headers=t}getInitialCards(){return y("".concat(this.baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return y("".concat(this.baseUrl,"/users/me"),{headers:this._headers})}createCard(e){return y("".concat(this.baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"edde3a5c-b30d-40b0-99e9-6f72ee976ddf","Content-Type":"application/json"}});console.log(f),f.getInitialCards().then((e=>{u.renderItems(e),console.log("res",e)})),f.getUserInfo().then((e=>{S.setUserInfo({name:e.name,job:e.about})})),h.addEventListener("click",(()=>{const e=S.getUserInfo();l.value=e.name,a.value=e.job,v.enableValidation(),v.toggleButton(),C.open()})),m.addEventListener("click",(()=>{L.open(),E.resetValidation()}));const b={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input-error",errorClass:"form__input-error"},v=new e(b,i),E=new e(b,_);v.enableValidation(),E.enableValidation();const S=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__title"}),g=new class extends o{constructor(e){super(e)}open(e,t){this._popupImage=this._popupElement.querySelector(".popup__image"),this._popupImage.src=e,this._popupImage.alt="A view of ".concat(t),this._popupElement.querySelector(".popup__caption").textContent=t,super.open()}}(".popup-prev");g.setEventListeners();const C=new r(".popup",(e=>{S.setUserInfo(e.name,e.title)}));C.setEventListeners();const L=new r(".popup-place",(e=>{k(e),E.resetValidation()}));L.setEventListeners();const q=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{placename:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{placename:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{placename:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{placename:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{placename:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{placename:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>k(e)},".cards__list");function k(e){const t=function(e){return new s(e,"#card-template",(()=>{g.open(e.link,e.placename)})).generateCard()}(e);q.addItem(t)}q.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YixNQUFNd0UsRUFBZ0IsSUdySmYsTUFDSHhKLFlBQVksRUFHVHlKLEdBQW1CLElBSFYsTUFDUkMsRUFEUSxTQUVSQyxHQUNrQixFQUNsQnhKLEtBQUt5SixPQUFTRixFQUNkdkosS0FBSzBKLFVBQVlGLEVBQ2pCeEosS0FBSzJKLFdBQWE3RyxTQUFTL0IsY0FBY3VJLEdBRzdDdEIsY0FDSWhJLEtBQUt5SixPQUFPdEgsU0FBU3lILElBQ2pCNUosS0FBSzBKLFVBQVVFLE1BR3ZCQyxRQUFRRCxHQUNKNUosS0FBSzJKLFdBQVdHLFFBQVFGLEtIcUlFLENBQzlCTCxNRnhId0IsQ0FBQyxDQUNyQnZGLFVBQVcsa0JBQ1hDLEtBQU0sb0RBRVYsQ0FDSUQsVUFBVyxjQUNYQyxLQUFNLHVEQUVWLENBQ0lELFVBQVcsaUJBQ1hDLEtBQU0sMERBRVYsQ0FDSUQsVUFBVyxVQUNYQyxLQUFNLG1EQUVWLENBQ0lELFVBQVcsd0JBQ1hDLEtBQU0sbURBRVYsQ0FDSUQsVUFBVyxpQkFDWEMsS0FBTSxpREVtR1Z1RixTQUFXN0csR0FBU3lHLEVBQVd6RyxJQUVqQyxnQkFhRixTQUFTeUcsRUFBV3pHLEdBQ2xCLE1BQU1vSCxFQVRSLFNBQXNCcEgsR0FLcEIsT0FKYSxJQUFJRCxFQUFLQyxFRnhJWSxrQkV3SWdCLEtBQ2hEb0csRUFBV3JFLEtBQUsvQixFQUFLc0IsS0FBTXRCLEVBQUtxQixjQUVUZ0csZUFLVEEsQ0FBYXJILEdBQzdCMEcsRUFBY1EsUUFBUUUsR0FaeEJWLEVBQWNyQixjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWdzLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWdzLmVycm9yQ2xhc3M7XG5cbiAgICB9XG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIC8vIGlucHV0LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcbiAgICB9XG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgLy8gaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblxuICAgIH1cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgX2hhc1ZhbGlkSW5wdXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuXG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGVCdXR0b24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0cygpKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKTsgLy8gPD0gPSBjb250cm9sbGluZyB0aGUgc3VibWl0IGJ1dHRvbiA9PVxuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpIC8vPD0gPSBjbGVhcmluZyBlcnJvcnMgPT1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn0iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgc2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgICAgICB0aGlzLl9wbGFjZW5hbWUgPSBkYXRhLnBsYWNlbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuXG4gICAgfVxuICAgIF9nZXRDbG9uZUZyb21UZW1wbGF0ZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG4gICAgX2hhbmRsZUxpa2VCdXR0b24gPSAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcblxuICAgICAgICB9KVxuICAgIH1cbiAgICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRDbG9uZUZyb21UZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gYFBsYWNlIGluICR7dGhpcy5fcGxhY2VuYW1lfWA7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZS10cmFzaFwiKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2luZm8tdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9wbGFjZW5hbWU7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9vdmVybGF5Q2xvc2UgPSB0aGlzLl9vdmVybGF5Q2xvc2UuYmluZCh0aGlzKVxuICAgIH1cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vdmVybGF5Q2xvc2UpO1xuXG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb3ZlcmxheUNsb3NlKTtcblxuICAgIH1cbiAgICBfb3ZlcmxheUNsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIH1cblxufSIsImltcG9ydCB7XG4gICAgUG9wdXBcbn0gZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKFBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICAgICAgc3VwZXIoUG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB9XG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge31cbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG5cbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKVxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpOyAvL3Jlc2V0IHRoZSBmb3JtIHdoZW4gb3Blbm5pbmcgYWdhaW5cblxuICAgIH1cbn0iLCIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBTZWxlY3RvcnMgLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0W25hbWU9J25hbWUnXVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dFRpdGxlID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0W25hbWU9J3RpdGxlJ11cIik7XG5leHBvcnQgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGNhcmRzLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWVkaXQtcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZVBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tdHlwZS1hZGQtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgcGxhY2VOYW1lID0gcGxhY2VQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC10eXBlLXBsYWNlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcGxhY2VVUkwgPSBwbGFjZVBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LXR5cGUtcGxhY2UtdXJsXCIpO1xuZXhwb3J0IGNvbnN0IGltZ1ByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXByZXZcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3SW1nID0gaW1nUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByZXZpZXdDYXB0aW9uID0gaW1nUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xuXG5cbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuXG5cbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXAgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW3tcbiAgICAgICAgcGxhY2VuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwbGFjZW5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGxhY2VuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGxhY2VuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gICAgfSxcbl07IiwiY29uc3QgY3VzdG9tRmV0Y2ggPSAodXJsLCBoZWFkZXJzKSA9PiB7XG4gICAgZmV0Y2godXJsLCBoZWFkZXJzKVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpKS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcblxufVxuY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBoZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgICAgfSlcbiAgICB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21GZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgICB9KVxuICAgIH1cbiAgICBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIG90aGVyIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCB0aGUgQVBJXG59XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIiwgLy9jb2hvcnQtMy1lblxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJlZGRlM2E1Yy1iMzBkLTQwYjAtOTllOS02ZjcyZWU5NzZkZGZcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG59KTsiLCIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBJTVBPUlRTIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5pbXBvcnQge1xuICBGb3JtVmFsaWRhdG9yXG59XG5mcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCB7XG4gIENhcmRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHtcbiAgUG9wdXBcbn1cbmZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhGb3JtXG59XG5mcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQge1xuICBTZWN0aW9uXG59IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuaW1wb3J0IHtcbiAgVXNlckluZm9cbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuXG5pbXBvcnQgXCIuLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhJbWFnZVxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5pbXBvcnQge1xuICBwcm9maWxlRm9ybSxcbiAgcHJvZmlsZSxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVQb3B1cCxcbiAgcHJvZmlsZVRpdGxlLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0VGl0bGUsXG4gIGNhcmRzLFxuICBjYXJkVGVtcGxhdGUsXG4gIGNhcmRMaXN0LFxuICBwcm9maWxlRWRpdCxcbiAgcGxhY2VQb3B1cEZvcm0sXG4gIHBsYWNlTmFtZSxcbiAgcGxhY2VVUkwsXG4gIGltZ1ByZXZpZXcsXG4gIHBvcHVwUHJldmlld0ltZyxcbiAgcG9wdXBQcmV2aWV3Q2FwdGlvbixcbiAgcGxhY2VGb3JtLFxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgZWRpdFByb2ZpbGVCdXR0b24sXG4gIGFkZENhcmRQb3B1cCxcbiAgY2xvc2VCdXR0b25zLFxuICBpbml0aWFsQ2FyZHNcblxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCJcbmltcG9ydCB7XG4gIGFwaVxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIlxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBBUEkgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zb2xlLmxvZyhhcGkpXG5hcGkuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4ocmVzID0+IHtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhyZXMpO1xuICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpXG4gIH0pO1xuYXBpLmdldFVzZXJJbmZvKCkudGhlbihyZXMgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgbmFtZTogcmVzLm5hbWUsXG4gICAgam9iOiByZXMuYWJvdXRcbiAgfSlcblxufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBFdmVudExpc3RlbmVycyAvLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBpbmZvLm5hbWU7XG4gIGlucHV0VGl0bGUudmFsdWUgPSBpbmZvLmpvYjtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b24oKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG5cbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBGb3JtIFZhbGlkdGF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCB2YWxpZGF0ZUNvbmZpZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbn07XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRlQ29uZmlncyxcbiAgcHJvZmlsZVBvcHVwXG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRlQ29uZmlncywgcGxhY2VGb3JtKTtcblxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxufSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vIFBvcHVwIGNyZWF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwLXByZXZcIik7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cFwiLCAoZGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEudGl0bGUpO1xufSk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLXBsYWNlXCIsIChkYXRhKSA9PiB7XG4gIHJlbmRlckNhcmQoZGF0YSk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBjYXJkIGNyZWF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBwbGFjZXNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiByZW5kZXJDYXJkKGRhdGEpLFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuXG5wbGFjZXNTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgKCkgPT4ge1xuICAgIHBvcHVwSW1hZ2Uub3BlbihkYXRhLmxpbmssIGRhdGEucGxhY2VuYW1lKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgZWxlbWVudCA9IGdlbmVyYXRlQ2FyZChkYXRhKTtcbiAgcGxhY2VzU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBuYW1lU2VsZWN0b3IsXG4gICAgICAgIGpvYlNlbGVjdG9yXG4gICAgfSkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuXG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYjtcbiAgICB9XG59IiwiaW1wb3J0IHtcbiAgICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB9XG4gICAgb3BlbihpbWFnZSwgdGV4dCkge1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBBIHZpZXcgb2YgJHt0ZXh0fWA7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBpdGVtcyxcbiAgICAgICAgcmVuZGVyZXJcbiAgICB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcblxuICAgIH1cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNWYWxpZElucHV0cyIsIl9pbnB1dExpc3QiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uIiwidG9nZ2xlQnV0dG9uIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZ0IiwidGFyZ2V0IiwidG9nZ2xlIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9pbWFnZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZGVsZXRlQnV0dG9uIiwiX2VsZW1lbnQiLCJfZ2V0Q2xvbmVGcm9tVGVtcGxhdGUiLCJzcmMiLCJfbGluayIsImFsdCIsIl9wbGFjZW5hbWUiLCJwbGFjZW5hbWUiLCJsaW5rIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsImNsb3NlIiwiYmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9vdmVybGF5Q2xvc2UiLCJrZXkiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiUG9wdXBTZWxlY3RvciIsInN1Ym1pdEhhbmRsZXIiLCJzdXBlciIsIl9mb3JtRWxlbWVudCIsInJlc2V0IiwiX3N1Ym1pdEhhbmRsZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dFZhbHVlcyIsIm5hbWUiLCJ2YWx1ZSIsInByb2ZpbGUiLCJwcm9maWxlUG9wdXAiLCJpbnB1dE5hbWUiLCJmb3JtIiwiaW5wdXRUaXRsZSIsImNhcmRzIiwiY2FyZExpc3QiLCJwbGFjZVBvcHVwRm9ybSIsImltZ1ByZXZpZXciLCJwbGFjZUZvcm0iLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRQb3B1cCIsImN1c3RvbUZldGNoIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhcGkiLCJiYXNlVXJsIiwiZ2V0SW5pdGlhbENhcmRzIiwiX2hlYWRlcnMiLCJnZXRVc2VySW5mbyIsImNyZWF0ZUNhcmQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJqb2IiLCJhYm91dCIsImluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJhZGRGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGVDb25maWdzIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsInBvcHVwSW1hZ2UiLCJpbWFnZSIsInRleHQiLCJfcG9wdXBJbWFnZSIsInRpdGxlIiwicmVuZGVyQ2FyZCIsInBsYWNlc1NlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiZWxlbWVudCIsImdlbmVyYXRlQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=