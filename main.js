!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasValidInputs(){return this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this.toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButton()})),this.resetValidation()}))}toggleButton(){this._hasValidInputs()?(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)):(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetValidation(){this.toggleButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s){let{data:o,handleCardClick:r}=e;t(this,"_getCloneFromTemplate",(()=>document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0))),t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__like-button_active")})),t(this,"_setEventListeners",(()=>{this._likeButton.addEventListener("click",(e=>{this._handleLikeButton(e)})),this._image.addEventListener("click",(e=>{this._handleCardClick(e)})),this._deleteButton.addEventListener("click",(e=>{this._element.remove()}))})),t(this,"generateCard",(()=>(this._element=this._getCloneFromTemplate(),this._image=this._element.querySelector(".card__image"),this._image.src=this._link,this._image.alt="Place in ".concat(this._txt),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__image-trash"),this._element.querySelector(".card__info-title").textContent=this._txt,this._setEventListeners(),this._element))),this._txt=o.name,this._link=o.link,this._selector=s,this._handleCardClick=r}}class o{constructor(e){this._popupElement=document.querySelector(e),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._overlayClose=this._overlayClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._overlayClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._overlayClose)}_overlayClose(e){e.target.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}class r extends o{constructor(e,t){var s,o;super(e),o=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[s]=o,this._submitHandler=t,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValues(){const e=[...this._formElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()})),super.setEventListeners()}}document.querySelector(".form");const n=document.querySelector(".profile"),i=(n.querySelector(".profile__name"),document.querySelector(".popup")),l=(n.querySelector(".profile__title"),form.querySelector(".form__input[name='name']")),a=form.querySelector(".form__input[name='title']"),c=document.querySelector(".cards"),u=(document.querySelector("#card-template"),c.querySelector(".cards__list")),d=(document.querySelector(".popup-edit-profile"),document.querySelector(".popup__form-type-add-place")),p=(d.querySelector(".form__input-type-place-name"),d.querySelector(".form__input-type-place-url"),document.querySelector(".popup-prev")),_=(p.querySelector(".popup__image"),p.querySelector(".popup__caption"),document.querySelector(".popup-place")),h=n.querySelector(".profile__edit-button"),m=n.querySelector(".profile__add-button"),y=(document.querySelectorAll(".popup__close-button"),(e,t)=>fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.statusText))).catch((e=>console.log()))),f=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return y("".concat(this._baseUrl,"/cards"),{headers:this._headers})}getUserInfo(){return y("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}createCard(e){return y("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"edde3a5c-b30d-40b0-99e9-6f72ee976ddf","Content-Type":"application/json"}});console.log(f),f.getInitialCards().then((e=>{u.renderItems(e)})),f.getUserInfo().then((e=>{S.setUserInfo({name:e.name,job:e.about})})),h.addEventListener("click",(()=>{const e=S.getUserInfo();l.value=e.name,a.value=e.job,v.enableValidation(),v.toggleButton(),C.open()})),m.addEventListener("click",(()=>{L.open(),E.resetValidation()}));const b={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input-error",errorClass:"form__input-error"},v=new e(b,i),E=new e(b,_);v.enableValidation(),E.enableValidation();const S=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}}({nameSelector:".profile__name",jobSelector:".profile__title"}),g=new class extends o{constructor(e){super(e)}open(e,t){this._popupImage=this._popupElement.querySelector(".popup__image"),this._popupImage.src=e,this._popupImage.alt="A view of ".concat(t),this._popupElement.querySelector(".popup__caption").textContent=t,super.open()}}(".popup-prev");g.setEventListeners();const C=new r(".popup",(e=>{console.log("data",e),S.setUserInfo(e.name,e.title)}));C.setEventListeners();const L=new r(".popup-place",(e=>{k(e),E.resetValidation()}));L.setEventListeners();const q=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>k(e)},".cards__list");function k(e){const t=function(e){console.log("data",e),f.createCard(e).then((e=>new s(e,"#card-template",(()=>{g.open(e.link,e.name)})).generateCard()))}(e);q.addItem(t)}q.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBYyxnQkFBaUJsQyxJQUN0RHdHLEVBQVd4RyxHQUNYNkYsRUFBaUJwRyxxQkFFbkJtRyxFQUFhM0Qsb0JBS2IsTUFBTXdFLEVBQWdCLElHeEpmLE1BQ0h4SixZQUFZLEVBR1R5SixHQUFtQixJQUhWLE1BQ1JDLEVBRFEsU0FFUkMsR0FDa0IsRUFDbEJ4SixLQUFLeUosT0FBU0YsRUFDZHZKLEtBQUswSixVQUFZRixFQUNqQnhKLEtBQUsySixXQUFhN0csU0FBUy9CLGNBQWN1SSxHQUc3Q3RCLGNBQ0loSSxLQUFLeUosT0FBT3RILFNBQVN5SCxJQUNqQjVKLEtBQUswSixVQUFVRSxNQUd2QkMsUUFBUUQsR0FDSjVKLEtBQUsySixXQUFXRyxRQUFRRixLSHdJRSxDQUM5QkwsTUYzSHdCLENBQUMsQ0FDckJ2RixLQUFNLGtCQUNOQyxLQUFNLG9EQUVWLENBQ0lELEtBQU0sY0FDTkMsS0FBTSx1REFFVixDQUNJRCxLQUFNLGlCQUNOQyxLQUFNLDBEQUVWLENBQ0lELEtBQU0sVUFDTkMsS0FBTSxtREFFVixDQUNJRCxLQUFNLHdCQUNOQyxLQUFNLG1EQUVWLENBQ0lELEtBQU0saUJBQ05DLEtBQU0saURFc0dWdUYsU0FBVzVHLEdBQVN3RyxFQUFXeEcsSUFFakMsZ0JBbUJGLFNBQVN3RyxFQUFXeEcsR0FDbEIsTUFBTW1ILEVBZlIsU0FBc0JuSCxHQUNwQnNFLFFBQVFDLElBQUksT0FBUXZFLEdBQ3BCd0UsRUFBSU0sV0FBVzlFLEdBQU02RCxNQUFLQyxHQUNYLElBQUloRSxFQUFLZ0UsRUY3SVUsa0JFNklpQixLQUMvQ3FDLEVBQVdyRSxLQUFLZ0MsRUFBSXpDLEtBQU15QyxFQUFJMUMsU0FHUGdHLGlCQVFYQSxDQUFhcEgsR0FDN0J5RyxFQUFjUSxRQUFRRSxHQWxCeEJWLEVBQWNyQixjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWdzLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWdzLmVycm9yQ2xhc3M7XG5cbiAgICB9XG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIC8vIGlucHV0LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcbiAgICB9XG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgLy8gaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblxuICAgIH1cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgX2hhc1ZhbGlkSW5wdXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuXG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGVCdXR0b24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0cygpKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKTsgLy8gPD0gPSBjb250cm9sbGluZyB0aGUgc3VibWl0IGJ1dHRvbiA9PVxuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpIC8vPD0gPSBjbGVhcmluZyBlcnJvcnMgPT1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn0iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBkYXRhLFxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2tcbiAgICB9LCBzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl90eHQgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcblxuICAgIH1cbiAgICBfZ2V0Q2xvbmVGcm9tVGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuICAgIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2dCkgPT4ge1xuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcblxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgICAgfSlcbiAgICB9XG4gICAgZ2VuZXJhdGVDYXJkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0Q2xvbmVGcm9tVGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBQbGFjZSBpbiAke3RoaXMuX3R4dH1gO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2UtdHJhc2hcIik7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbmZvLXRpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdHh0O1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheUNsb3NlID0gdGhpcy5fb3ZlcmxheUNsb3NlLmJpbmQodGhpcylcbiAgICB9XG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb3ZlcmxheUNsb3NlKTtcblxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX292ZXJsYXlDbG9zZSk7XG5cbiAgICB9XG4gICAgX292ZXJsYXlDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcbiAgICB9XG5cbn0iLCJpbXBvcnQge1xuICAgIFBvcHVwXG59IGZyb20gXCIuL1BvcHVwXCI7XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvcihQb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgICAgIHN1cGVyKFBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgfVxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIildO1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9XG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuXG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHN1cGVyLmNsb3NlKClcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTsgLy9yZXNldCB0aGUgZm9ybSB3aGVuIG9wZW5uaW5nIGFnYWluXG5cbiAgICB9XG59IiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gU2VsZWN0b3JzIC8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dFtuYW1lPSduYW1lJ11cIik7XG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dFtuYW1lPSd0aXRsZSddXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBjYXJkcy5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcGxhY2VQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLXR5cGUtYWRkLXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWUgPSBwbGFjZVBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LXR5cGUtcGxhY2UtbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZVVSTCA9IHBsYWNlUG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtdHlwZS1wbGFjZS11cmxcIik7XG5leHBvcnQgY29uc3QgaW1nUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtcHJldlwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByZXZpZXdJbWcgPSBpbWdQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJldmlld0NhcHRpb24gPSBpbWdQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XG5cblxuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5cblxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cCA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbe1xuICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgICB9LFxuXTsiLCJjb25zdCBjdXN0b21GZXRjaCA9ICh1cmwsIGhlYWRlcnMpID0+IHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBoZWFkZXJzKVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXNUZXh0KSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKCkpXG5cbn1cbmNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBiYXNlVXJsLFxuICAgICAgICBoZWFkZXJzXG4gICAgfSkge1xuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGNyZWF0ZUNhcmQoZGF0YSkge1xuICAgICAgICByZXR1cm4gY3VzdG9tRmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIG90aGVyIG1ldGhvZHMgZm9yIHdvcmtpbmcgd2l0aCB0aGUgQVBJXG59XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIiwgLy9jb2hvcnQtMy1lblxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJlZGRlM2E1Yy1iMzBkLTQwYjAtOTllOS02ZjcyZWU5NzZkZGZcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG59KTsiLCIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBJTVBPUlRTIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5pbXBvcnQge1xuICBGb3JtVmFsaWRhdG9yXG59XG5mcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCB7XG4gIENhcmRcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHtcbiAgUG9wdXBcbn1cbmZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhGb3JtXG59XG5mcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQge1xuICBTZWN0aW9uXG59IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuaW1wb3J0IHtcbiAgVXNlckluZm9cbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuXG5pbXBvcnQgXCIuLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBQb3B1cFdpdGhJbWFnZVxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5pbXBvcnQge1xuICBwcm9maWxlRm9ybSxcbiAgcHJvZmlsZSxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVQb3B1cCxcbiAgcHJvZmlsZVRpdGxlLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0VGl0bGUsXG4gIGNhcmRzLFxuICBjYXJkVGVtcGxhdGUsXG4gIGNhcmRMaXN0LFxuICBwcm9maWxlRWRpdCxcbiAgcGxhY2VQb3B1cEZvcm0sXG4gIG5hbWUsXG4gIHBsYWNlVVJMLFxuICBpbWdQcmV2aWV3LFxuICBwb3B1cFByZXZpZXdJbWcsXG4gIHBvcHVwUHJldmlld0NhcHRpb24sXG4gIHBsYWNlRm9ybSxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxuICBhZGRDYXJkUG9wdXAsXG4gIGNsb3NlQnV0dG9ucyxcbiAgaW5pdGlhbENhcmRzXG5cbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiXG5pbXBvcnQge1xuICBhcGlcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCJcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gQVBJIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc29sZS5sb2coYXBpKVxuYXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKHJlcyA9PiB7XG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMocmVzKTtcbiAgICAvLyBjb25zb2xlLmxvZygncmVzJywgcmVzKVxuICB9KTtcbmFwaS5nZXRVc2VySW5mbygpLnRoZW4ocmVzID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IHJlcy5uYW1lLFxuICAgIGpvYjogcmVzLmFib3V0XG4gIH0pXG5cbn0pO1xuXG4vLyBhcGkuY3JlYXRlQ2FyZChkYXRhKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gRXZlbnRMaXN0ZW5lcnMgLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gaW5mby5uYW1lO1xuICBpbnB1dFRpdGxlLnZhbHVlID0gaW5mby5qb2I7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbmFkZENhcmRQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZENhcmQub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuXG59KTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gRm9ybSBWYWxpZHRhdGlvbiAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgdmFsaWRhdGVDb25maWdzID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG59O1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0ZUNvbmZpZ3MsXG4gIHByb2ZpbGVQb3B1cFxuKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZUNvbmZpZ3MsIHBsYWNlRm9ybSk7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBQb3B1cCBjcmVhdGlvbiAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC1wcmV2XCIpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBcIiwgKGRhdGEpID0+IHtcbiAgY29uc29sZS5sb2coJ2RhdGEnLCBkYXRhKVxuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEudGl0bGUpO1xufSk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLXBsYWNlXCIsIChkYXRhKSA9PiB7XG4gIHJlbmRlckNhcmQoZGF0YSk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBjYXJkIGNyZWF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBwbGFjZXNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiByZW5kZXJDYXJkKGRhdGEpLFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuXG5wbGFjZXNTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnNvbGUubG9nKCdkYXRhJywgZGF0YSkgLy9uYW1lIGxpbmtcbiAgYXBpLmNyZWF0ZUNhcmQoZGF0YSkudGhlbihyZXMgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChyZXMsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCAoKSA9PiB7XG4gICAgICBwb3B1cEltYWdlLm9wZW4ocmVzLmxpbmssIHJlcy5uYW1lKTtcblxuICAgIH0pO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH0pXG5cblxufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgZWxlbWVudCA9IGdlbmVyYXRlQ2FyZChkYXRhKTtcbiAgcGxhY2VzU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBuYW1lU2VsZWN0b3IsXG4gICAgICAgIGpvYlNlbGVjdG9yXG4gICAgfSkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuXG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lLFxuICAgICAgICBqb2JcbiAgICB9KSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYjtcbiAgICB9XG59IiwiaW1wb3J0IHtcbiAgICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB9XG4gICAgb3BlbihpbWFnZSwgdGV4dCkge1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBBIHZpZXcgb2YgJHt0ZXh0fWA7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBpdGVtcyxcbiAgICAgICAgcmVuZGVyZXJcbiAgICB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcblxuICAgIH1cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNWYWxpZElucHV0cyIsIl9pbnB1dExpc3QiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uIiwidG9nZ2xlQnV0dG9uIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwic2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiZG9jdW1lbnQiLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZ0IiwidGFyZ2V0IiwidG9nZ2xlIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9pbWFnZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZGVsZXRlQnV0dG9uIiwiX2VsZW1lbnQiLCJfZ2V0Q2xvbmVGcm9tVGVtcGxhdGUiLCJzcmMiLCJfbGluayIsImFsdCIsIl90eHQiLCJuYW1lIiwibGluayIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJjbG9zZSIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfb3ZlcmxheUNsb3NlIiwia2V5Iiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsIlBvcHVwU2VsZWN0b3IiLCJzdWJtaXRIYW5kbGVyIiwic3VwZXIiLCJfZm9ybUVsZW1lbnQiLCJyZXNldCIsIl9zdWJtaXRIYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInByb2ZpbGUiLCJwcm9maWxlUG9wdXAiLCJpbnB1dE5hbWUiLCJmb3JtIiwiaW5wdXRUaXRsZSIsImNhcmRzIiwiY2FyZExpc3QiLCJwbGFjZVBvcHVwRm9ybSIsImltZ1ByZXZpZXciLCJwbGFjZUZvcm0iLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRQb3B1cCIsImN1c3RvbUZldGNoIiwidXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYXBpIiwiYmFzZVVybCIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImNyZWF0ZUNhcmQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJqb2IiLCJhYm91dCIsImluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJhZGRGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGVDb25maWdzIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsInBvcHVwSW1hZ2UiLCJpbWFnZSIsInRleHQiLCJfcG9wdXBJbWFnZSIsInRpdGxlIiwicmVuZGVyQ2FyZCIsInBsYWNlc1NlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiZWxlbWVudCIsImdlbmVyYXRlQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=