!function(){var e={240:function(){new class{constructor(e,t){this.baseUrl=e,this.headers=t}getInitialCards(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(e.status))).catch((e=>console.log(e)))}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"edde3a5c-b30d-40b0-99e9-6f72ee976ddf","Content-Type":"application/json"}})}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,s),r.exports}!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasValidInputs(){return this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._button=this._form.querySelector(this._submitButtonSelector),this.toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButton()})),this.resetValidation()}))}toggleButton(){this._hasValidInputs()?(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)):(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetValidation(){this.toggleButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e,s,o){t(this,"_getCloneFromTemplate",(()=>document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0))),t(this,"_handleLikeButton",(e=>{e.target.classList.toggle("card__like-button_active")})),t(this,"_setEventListeners",(()=>{this._likeButton.addEventListener("click",(e=>{this._handleLikeButton(e)})),this._image.addEventListener("click",(e=>{this._handleCardClick(e)})),this._deleteButton.addEventListener("click",(e=>{this._element.remove()}))})),t(this,"generateCard",(()=>(this._element=this._getCloneFromTemplate(),this._image=this._element.querySelector(".card__image"),this._image.src=this._link,this._image.alt="Place in ".concat(this._placename),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__image-trash"),this._element.querySelector(".card__info-title").textContent=this._placename,this._setEventListeners(),this._element))),this._placename=e.placename,this._link=e.link,this._selector=s,this._handleCardClick=o}}class n{constructor(e){this._popupElement=document.querySelector(e),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._overlayClose=this._overlayClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._overlayClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._overlayClose)}_overlayClose(e){e.target.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}class r extends n{constructor(e,t){var s,o;super(e),o=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[s]=o,this._submitHandler=t,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValues(){const e=[...this._formElement.querySelectorAll(".form__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()})),super.setEventListeners()}}document.querySelector(".form");const i=document.querySelector(".profile"),l=(i.querySelector(".profile__name"),document.querySelector(".popup")),a=(i.querySelector(".profile__title"),form.querySelector(".form__input[name='name']")),c=form.querySelector(".form__input[name='title']"),u=document.querySelector(".cards"),p=(document.querySelector("#card-template"),u.querySelector(".cards__list")),_=(document.querySelector(".popup-edit-profile"),document.querySelector(".popup__form-type-add-place")),d=(_.querySelector(".form__input-type-place-name"),_.querySelector(".form__input-type-place-url"),document.querySelector(".popup-prev")),h=(d.querySelector(".popup__image"),d.querySelector(".popup__caption"),document.querySelector(".popup-place")),m=i.querySelector(".profile__edit-button"),y=i.querySelector(".profile__add-button");document.querySelectorAll(".popup__close-button"),s(240).api.getInitialCards().then((e=>{p.renderItems(e),console.log("res",e)})),m.addEventListener("click",(()=>{const e=E.getUserInfo();a.value=e.name,c.value=e.job,v.enableValidation(),v.toggleButton(),g.open()})),y.addEventListener("click",(()=>{C.open(),b.resetValidation()}));const f={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input-error",errorClass:"form__input-error"},v=new e(f,l),b=new e(f,h);v.enableValidation(),b.enableValidation();const E=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__title"}),S=new class extends n{constructor(e){super(e)}open(e,t){this._popupImage=this._popupElement.querySelector(".popup__image"),this._popupImage.src=e,this._popupImage.alt="A view of ".concat(t),this._popupElement.querySelector(".popup__caption").textContent=t,super.open()}}(".popup-prev");S.setEventListeners();const g=new r(".popup",(e=>{E.setUserInfo(e.name,e.title)}));g.setEventListeners();const C=new r(".popup-place",(e=>{q(e),b.resetValidation()}));C.setEventListeners();const L=new class{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{placename:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{placename:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{placename:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{placename:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{placename:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{placename:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>q(e)},".cards__list");function q(e){const t=function(e){return new o(e,"#card-template",(()=>{S.open(e.link,e.placename)})).generateCard()}(e);L.addItem(t)}L.renderItems()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SzRKLFdBQWFwRixTQUFTL0IsY0FBYzhHLEdBRzdDdEIsY0FDSWpJLEtBQUswSixPQUFPN0YsU0FBU2dHLElBQ2pCN0osS0FBSzJKLFVBQVVFLE1BR3ZCQyxRQUFRRCxHQUNKN0osS0FBSzRKLFdBQVdHLFFBQVFGLEtINEhFLENBQzlCTCxNRC9Hd0IsQ0FBQyxDQUNyQjlELFVBQVcsa0JBQ1hDLEtBQU0sb0RBRVYsQ0FDSUQsVUFBVyxjQUNYQyxLQUFNLHVEQUVWLENBQ0lELFVBQVcsaUJBQ1hDLEtBQU0sMERBRVYsQ0FDSUQsVUFBVyxVQUNYQyxLQUFNLG1EQUVWLENBQ0lELFVBQVcsd0JBQ1hDLEtBQU0sbURBRVYsQ0FDSUQsVUFBVyxpQkFDWEMsS0FBTSxpREMwRlY4RCxTQUFXcEYsR0FBU2dGLEVBQVdoRixJQUVqQyxnQkFhRixTQUFTZ0YsRUFBV2hGLEdBQ2xCLE1BQU0yRixFQVRSLFNBQXNCM0YsR0FLcEIsT0FKYSxJQUFJRCxFQUFLQyxFRC9IWSxrQkMrSGdCLEtBQ2hEMkUsRUFBVzVDLEtBQUsvQixFQUFLc0IsS0FBTXRCLEVBQUtxQixjQUVUdUUsZUFLVEEsQ0FBYTVGLEdBQzdCaUYsRUFBY1EsUUFBUUUsR0FaeEJWLEVBQWNyQixjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBoZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgfVxuXG4gICAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcbn1cblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuXCIsIC8vY29ob3J0LTMtZW5cbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiZWRkZTNhNWMtYjMwZC00MGIwLTk5ZTktNmY3MmVlOTc2ZGRmXCIsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxufSk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWdzLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWdzLmVycm9yQ2xhc3M7XG5cbiAgICB9XG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIC8vIGlucHV0LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcbiAgICB9XG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIC8vIGFkZCBlcnJvciBtc2cvY2xhc3NcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgLy8gaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblxuICAgIH1cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcblxuICAgICAgICB9XG5cbiAgICB9XG4gICAgX2hhc1ZhbGlkSW5wdXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuXG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGVCdXR0b24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0cygpKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKTsgLy8gPD0gPSBjb250cm9sbGluZyB0aGUgc3VibWl0IGJ1dHRvbiA9PVxuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpIC8vPD0gPSBjbGVhcmluZyBlcnJvcnMgPT1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn0iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgc2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgICAgICB0aGlzLl9wbGFjZW5hbWUgPSBkYXRhLnBsYWNlbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuXG4gICAgfVxuICAgIF9nZXRDbG9uZUZyb21UZW1wbGF0ZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG4gICAgX2hhbmRsZUxpa2VCdXR0b24gPSAoZXZ0KSA9PiB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcblxuICAgICAgICB9KVxuICAgIH1cbiAgICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRDbG9uZUZyb21UZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gYFBsYWNlIGluICR7dGhpcy5fcGxhY2VuYW1lfWA7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZS10cmFzaFwiKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2luZm8tdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9wbGFjZW5hbWU7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9vdmVybGF5Q2xvc2UgPSB0aGlzLl9vdmVybGF5Q2xvc2UuYmluZCh0aGlzKVxuICAgIH1cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vdmVybGF5Q2xvc2UpO1xuXG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb3ZlcmxheUNsb3NlKTtcblxuICAgIH1cbiAgICBfb3ZlcmxheUNsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIH1cblxufSIsImltcG9ydCB7XG4gICAgUG9wdXBcbn0gZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKFBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcbiAgICAgICAgc3VwZXIoUG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB9XG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge31cbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG5cbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKVxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpOyAvL3Jlc2V0IHRoZSBmb3JtIHdoZW4gb3Blbm5pbmcgYWdhaW5cblxuICAgIH1cbn0iLCIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBTZWxlY3RvcnMgLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0W25hbWU9J25hbWUnXVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dFRpdGxlID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0W25hbWU9J3RpdGxlJ11cIik7XG5leHBvcnQgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGNhcmRzLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWVkaXQtcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwbGFjZVBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tdHlwZS1hZGQtcGxhY2VcIik7XG5leHBvcnQgY29uc3QgcGxhY2VOYW1lID0gcGxhY2VQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC10eXBlLXBsYWNlLW5hbWVcIik7XG5leHBvcnQgY29uc3QgcGxhY2VVUkwgPSBwbGFjZVBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LXR5cGUtcGxhY2UtdXJsXCIpO1xuZXhwb3J0IGNvbnN0IGltZ1ByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXByZXZcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3SW1nID0gaW1nUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByZXZpZXdDYXB0aW9uID0gaW1nUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xuXG5cbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXBsYWNlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuXG5cbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXAgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW3tcbiAgICAgICAgcGxhY2VuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwbGFjZW5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGxhY2VuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGxhY2VuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBsYWNlbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gICAgfSxcbl07IiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gSU1QT1JUUyAvLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuaW1wb3J0IHtcbiAgRm9ybVZhbGlkYXRvclxufVxuZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5pbXBvcnQge1xuICBDYXJkXG59IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7XG4gIFBvcHVwXG59XG5mcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoRm9ybVxufVxuZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHtcbiAgU2VjdGlvblxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5cbmltcG9ydCB7XG4gIFVzZXJJbmZvXG59IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cblxuaW1wb3J0IFwiLi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgUG9wdXBXaXRoSW1hZ2Vcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHtcbiAgcHJvZmlsZUZvcm0sXG4gIHByb2ZpbGUsXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlUG9wdXAsXG4gIHByb2ZpbGVUaXRsZSxcbiAgaW5wdXROYW1lLFxuICBpbnB1dFRpdGxlLFxuICBjYXJkcyxcbiAgY2FyZFRlbXBsYXRlLFxuICBjYXJkTGlzdCxcbiAgcHJvZmlsZUVkaXQsXG4gIHBsYWNlUG9wdXBGb3JtLFxuICBwbGFjZU5hbWUsXG4gIHBsYWNlVVJMLFxuICBpbWdQcmV2aWV3LFxuICBwb3B1cFByZXZpZXdJbWcsXG4gIHBvcHVwUHJldmlld0NhcHRpb24sXG4gIHBsYWNlRm9ybSxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxuICBhZGRDYXJkUG9wdXAsXG4gIGNsb3NlQnV0dG9ucyxcbiAgaW5pdGlhbENhcmRzXG5cbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiXG5pbXBvcnQge1xuICBhcGlcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCJcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8gQVBJIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4ocmVzID0+IHtcbiAgY2FyZExpc3QucmVuZGVySXRlbXMocmVzKTtcbiAgY29uc29sZS5sb2coJ3JlcycsIHJlcylcbn0pXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBFdmVudExpc3RlbmVycyAvLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBpbmZvLm5hbWU7XG4gIGlucHV0VGl0bGUudmFsdWUgPSBpbmZvLmpvYjtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b24oKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG5cbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBGb3JtIFZhbGlkdGF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCB2YWxpZGF0ZUNvbmZpZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbn07XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRlQ29uZmlncyxcbiAgcHJvZmlsZVBvcHVwXG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRlQ29uZmlncywgcGxhY2VGb3JtKTtcblxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxufSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vIFBvcHVwIGNyZWF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwLXByZXZcIik7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cFwiLCAoZGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEudGl0bGUpO1xufSk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLXBsYWNlXCIsIChkYXRhKSA9PiB7XG4gIHJlbmRlckNhcmQoZGF0YSk7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLyBjYXJkIGNyZWF0aW9uIC8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBwbGFjZXNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiByZW5kZXJDYXJkKGRhdGEpLFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuXG5wbGFjZXNTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgKCkgPT4ge1xuICAgIHBvcHVwSW1hZ2Uub3BlbihkYXRhLmxpbmssIGRhdGEucGxhY2VuYW1lKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgZWxlbWVudCA9IGdlbmVyYXRlQ2FyZChkYXRhKTtcbiAgcGxhY2VzU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBuYW1lU2VsZWN0b3IsXG4gICAgICAgIGpvYlNlbGVjdG9yXG4gICAgfSkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuXG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYjtcbiAgICB9XG59IiwiaW1wb3J0IHtcbiAgICBQb3B1cFxufSBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB9XG4gICAgb3BlbihpbWFnZSwgdGV4dCkge1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBBIHZpZXcgb2YgJHt0ZXh0fWA7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe1xuICAgICAgICBpdGVtcyxcbiAgICAgICAgcmVuZGVyZXJcbiAgICB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcblxuICAgIH1cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiX2hlYWRlcnMiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImF1dGhvcml6YXRpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc1ZhbGlkSW5wdXRzIiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b24iLCJ0b2dnbGVCdXR0b24iLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0VmFsaWRhdGlvbiIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsIl9zZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJldnQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJfbGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2ltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsIl9nZXRDbG9uZUZyb21UZW1wbGF0ZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX3BsYWNlbmFtZSIsInBsYWNlbmFtZSIsImxpbmsiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiY2xvc2UiLCJiaW5kIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX292ZXJsYXlDbG9zZSIsImtleSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJQb3B1cFNlbGVjdG9yIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX2Zvcm1FbGVtZW50IiwicmVzZXQiLCJfc3VibWl0SGFuZGxlciIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwicHJvZmlsZSIsInByb2ZpbGVQb3B1cCIsImlucHV0TmFtZSIsImZvcm0iLCJpbnB1dFRpdGxlIiwiY2FyZHMiLCJjYXJkTGlzdCIsInBsYWNlUG9wdXBGb3JtIiwiaW1nUHJldmlldyIsInBsYWNlRm9ybSIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZFBvcHVwIiwiYXBpIiwicmVuZGVySXRlbXMiLCJpbmZvIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsImpvYiIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwQWRkQ2FyZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0ZUNvbmZpZ3MiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwic2V0VXNlckluZm8iLCJwb3B1cEltYWdlIiwiaW1hZ2UiLCJ0ZXh0IiwiX3BvcHVwSW1hZ2UiLCJ0aXRsZSIsInJlbmRlckNhcmQiLCJwbGFjZXNTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiXSwic291cmNlUm9vdCI6IiJ9